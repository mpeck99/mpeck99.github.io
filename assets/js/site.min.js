"use strict";if(document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("body");e.classList.contains("transition")?e.classList.remove("transition"):e.classList.add("transition")}),document.querySelector(".main-nav"))for(var path=location.pathname.split("/"),href=path[1],navLink=document.querySelectorAll(".nav-link"),i=0;i<navLink.length;i++)(navLink[i].getAttribute("href")===href||""===href&&"index.html"===navLink[i].getAttribute("href"))&&navLink[i].classList.add("active");if(document.querySelector(".hamburger-menu")){var menu=document.querySelector(".hamburger-menu"),navList=document.querySelector(".main-nav"),body=document.querySelector("body");menu.addEventListener("click",function(){navList.classList.contains("js-open")?(menu.classList.add("js-close"),navList.classList.add("js-close"),setTimeout(function(){navList.classList.remove("js-open"),menu.classList.remove("js-open"),menu.classList.remove("js-close"),navList.classList.remove("js-close"),body.classList.remove("js-open")},500)):(navList.classList.add("js-open"),body.classList.add("js-open"),menu.classList.add("js-open"))})}var movieArray=[],movieWrapper=document.querySelector(".movie-wrapper");function loadMovies(){movieWrapper.innerHTML="",setTimeout(function(){for(var e=function(){var e="https://api.themoviedb.org/3/movie/"+movieArray[r].id+"?api_key=e444034c3d7ef62e63059e6e8ac5b828&language=en-US",t="https://api.themoviedb.org/3/movie/"+movieArray[r].id+"/release_dates?api_key=e444034c3d7ef62e63059e6e8ac5b828&language=en-US";fetch(e).then(function(e){e.json().then(function(n){fetch(t).then(function(e){e.json().then(function(e){for(var t=e.results.filter(function(e){return"US"===e.iso_3166_1}),r=0;r<t.length;r++){var a="";a=325<=n.overview.length?n.overview.substring(0,325)+'<a href="https://www.themoviedb.org/movie/'+n.id+"-"+n.title+'" target="_blank" class="read-more" aria-label="Read more about'+n.title+'">...read more</a>':n.overview;var i=10*n.vote_average,s="",o=Math.floor(n.runtime/60)+"h "+n.runtime%60+"m";s=""!=t[r].release_dates[0].certification?t[r].release_dates[0].certification:""!=t[r].release_dates[1].certification?t[r].release_dates[1].certification:""!=t[r].release_dates[2].certification?t[r].release_dates[2].certification:t[r].release_dates[3].certification,movieWrapper.innerHTML+='<div class="card" onclick="this.focus()" style="background-image: url(\'https://image.tmdb.org/t/p/original/'+n.poster_path+"');\""+n.id+'><div class="details"><h2>'+n.title+'</h2><span class="score"><p>'+i+'%</p></span><p class="tagline">'+n.tagline+"</p><ul><li>"+s+"</li><li>"+n.release_date.split("-")[0]+"</li><li>"+o+"</li><li>"+n.genres[0].name+'</li></ul><p class="overview">'+a+"</p></div></div>"}})})}).catch(function(e){console.error("we came across an error",e)})})},r=0;r<movieArray.length;r++)e()},1e3)}if(movieWrapper){var personalSearch=function(){var t=document.querySelector("#search").value.toLowerCase();if(document.querySelector(".error").classList.contains("active")&&document.querySelector(".error").classList.remove("active"),0==t.length||" "==t)loadMovies();else{var r=movieArray.filter(function(e){return e.title.toLowerCase().replace(/'/g,"")===t.replace(/'/g,"")});if(0<r.length){var i="";setTimeout(function(){for(var e=0;e<r.length;e++){var t="https://api.themoviedb.org/3/movie/"+r[e].id+"?api_key=e444034c3d7ef62e63059e6e8ac5b828&primary_release_year="+r[e].year+"&year="+r[e].year+"&query="+r[e].title.replace(/\s/g,"-")+"&language=en-US";movieWrapper.innerHTML="",fetch(t).then(function(e){e.json().then(function(e){var t=e;i=325<=t.overview.length?t.overview.substring(0,325)+'<a href="https://www.themoviedb.org/movie/'+t.id+"-"+t.title+'" target="_blank" class="read-more" aria-label="Read more about'+t.title+'">...read more</a>':t.overview;var r=10*t.vote_average,a=Math.floor(t.runtime/60)+"h "+t.runtime%60+"m";movieWrapper.innerHTML+='<div class="card" onclick="this.focus()" style="background-image: url(\'https://image.tmdb.org/t/p/original/'+t.poster_path+"');\"id="+t.title.replace(/\s/g,"-").toLowerCase()+'><div class="details"><h2>'+t.title+'</h2><span class="score"><p>'+r+'%</p></span><p class="tagline">'+t.tagline+"</p><ul><li>"+t.release_date.split("-")[0]+"</li><li>"+a+"</li><li>"+t.genres[0].name+'</li></ul><p class="overview">'+i+"</p></div></div>"})}).catch(function(e){console.error("we came across an error",e)})}},200)}else movieWrapper.innerHTML="",document.querySelector(".error").classList.contains("active")||(movieWrapper.innerHTML="",document.querySelector(".error").classList.add("active"))}},googleUrl="https://sheets.googleapis.com/v4/spreadsheets/1nXRZYrOnedMOvioQJxbIQKTpc9_XCGI23-KMk8jwZQU/values/Movies!A:D?key=AIzaSyDrWhgTrY_NIQ7pa19SpdYtF0Wcom3stDA";fetch(googleUrl).then(function(e){e.json().then(function(e){for(var t=e,r=0;r<t.values.length;r++){var a="https://api.themoviedb.org/3/search/movie?api_key=e444034c3d7ef62e63059e6e8ac5b828&query="+t.values[r][0].replace(/\s+/g,"-")+"&primary_release_year="+t.values[r][1]+"&year="+t.values[r][1]+"&language=en-US&include_adult=false";fetch(a).then(function(e){e.json().then(function(e){for(var t=0;t<e.results.length;t++){var r=e.results[t].title,a=e.results[t].release_date.split("-")[0];movieArray.push({title:r,year:a,id:e.results[t].id,poster:"https://image.tmdb.org/t/p/original/"+e.results[t].poster_path});break}}).catch(function(e){console.error("we came across an error",e)})})}})}).catch(function(e){console.error("There was an issue with the resquest",e)}),document.querySelector("#search").addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&personalSearch()}),document.querySelector(".search-submit").addEventListener("click",function(){personalSearch()}),document.querySelector(".search-submit").addEventListener("touchevent",function(){personalSearch()}),loadMovies()}
//# sourceMappingURL=maps/site.min.js.map
