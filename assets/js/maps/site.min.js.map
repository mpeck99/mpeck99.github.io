{"version":3,"sources":["site.js"],"names":["document","addEventListener","body","querySelector","classList","contains","add","path","location","pathname","split","href","navLink","querySelectorAll","i","length","getAttribute","menu","navList","setTimeout","remove","movieArray","movieWrapper","innerHTML","_loop","fetch","response","res","json","then","movie","releaseDates","dates","rating","results","filter","iso_3166_1","x","overview","substring","id","title","vote","vote_average","cert","runtime","Math","floor","release_dates","certification","genres","name","poster_path","tagline","release_date","err","console","error","personalSearch","searchvalue","value","toLowerCase","loadMovies","_loop2","searchApi","year","replace","googleUrl","movies","apiUrl","values","push","poster","event","preventDefault","keyCode","top","window","scrollY"],"mappings":"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","file":"../site.min.js","sourcesContent":["// ------------------------------------------------\n// Set active page in nav\n// ------------------------------------------------\ndocument.addEventListener('DOMContentLoaded', function () {\n  const body = document.querySelector('body');\n\n  if (!body.classList.contains('transition')) {\n    body.classList.add('transition');\n  } else {\n    body.classList.remove('transition');\n  }\n});\n\nif (document.querySelector('.main-nav')) {\n  const path = location.pathname.split('/');\n  const href = path[1];\n\n  const navLink = document.querySelectorAll('.nav-link');\n  for (var i = 0; i < navLink.length; i++) {\n    if (navLink[i].getAttribute('href') === href) {\n      navLink[i].classList.add('active');\n    } else if (\n      href === '' &&\n      navLink[i].getAttribute('href') === 'index.html'\n    ) {\n      navLink[i].classList.add('active');\n    }\n  }\n}\n\n// Menu open / close \nif(document.querySelector('.hamburger-menu')){\n  const menu = document.querySelector('.hamburger-menu'),\n        navList = document.querySelector('.main-nav'),\n        body = document.querySelector('body');\n\n  menu.addEventListener('click', function(){\n      if(navList.classList.contains('js-open')){ ;\n        menu.classList.add('js-close');\n        navList.classList.add('js-close');\n        setTimeout(() => {\n          navList.classList.remove('js-open'); \n          menu.classList.remove('js-open')\n          menu.classList.remove('js-close');\n          navList.classList.remove('js-close');\n          body.classList.remove('js-open');\n           \n        }, 500);\n      } else {\n        navList.classList.add('js-open');\n        body.classList.add('js-open');\n        menu.classList.add('js-open');\n      }\n  });\n}\n\nconst movieArray = [];\nconst movieWrapper = document.querySelector('.movie-wrapper');\n\nfunction loadMovies(){\n  movieWrapper.innerHTML = '';\n  setTimeout(function(){\n    for(var x=0; x<movieArray.length; x++){\n      const getUrl = 'https://api.themoviedb.org/3/movie/'+movieArray[x].id+'?api_key=e444034c3d7ef62e63059e6e8ac5b828&language=en-US';\n      const releaseDates = 'https://api.themoviedb.org/3/movie/'+movieArray[x].id+'/release_dates?api_key=e444034c3d7ef62e63059e6e8ac5b828&language=en-US';\n      \n      fetch(getUrl).then(response => {\n        response.json().then(movie => {\n          fetch(releaseDates).then(res=> {\n            res.json().then(dates => {\n              var rating = dates.results.filter(i => i.iso_3166_1 === 'US');\n              for(var x = 0; x < rating.length; x++){\n              let overview ='';\n              if(movie.overview.length >= 325){\n                overview = movie.overview.substring(0,325)+'<a href=\"https://www.themoviedb.org/movie/'+movie.id+'-'+movie.title+'\" target=\"_blank\" class=\"read-more\" aria-label=\"Read more about'+movie.title+'\">...read more</a>';\n              }\n              else {\n                  overview = movie.overview;\n              }\n              const vote = (movie.vote_average)/10 * 5;\n              const hours = Math.floor(movie.runtime / 60);\n              const mins = movie.runtime % 60;\n              const cert = '';\n              const runtime = hours+'h '+mins+'m';\n           \n              if(rating[x].release_dates[0].certification != \"\" && rating[x].release_dates[0].certification != 'undefined'){\n                cert = rating[x].release_dates[0].certification;\n              }\n              else if(rating[x].release_dates[1].certification != \"\" && rating[x].release_dates[1].certification != 'undefined'){\n                cert = rating[x].release_dates[1].certification;\n              }\n              else if(rating[x].release_dates[2].certification !=\"\" && rating[x].release_dates[2].certification != 'undefined'){\n                cert = rating[x].release_dates[2].certification;\n              }\n              else if(rating[x].release_dates[3].certification !=\"\" && rating[x].release_dates[3].certification != 'undefined'){\n                cert = rating[x].release_dates[3].certification;\n              }\n            \n              if(movie.genres[0].name === 'Science Fiction'){\n                movie.genres[0].name = 'Sci-Fi';\n              }\n\n              movieWrapper.innerHTML += '<div class=\"card\" onclick=\"this.focus()\" style=\"background-image: url(\\'https://image.tmdb.org/t/p/original/'+movie.poster_path+'\\');\"'+movie.id+'><div class=\"details\"><h2>'+movie.title+'</h2><p class=\"tagline\">'+movie.tagline+'</p><div class=\"Stars\" style=\"--rating:'+vote+';\" aria-label=\"Rating of this product is '+vote+' out of 5.\"></div><ul><li>'+cert+'</li><li>'+movie.release_date.split('-')[0]+'</li><li>'+runtime+'</li><li>'+movie.genres[0].name+'</li></ul><p class=\"overview\">'+overview+'</p></div></div>';\n                  }\n                })\n          });                    \n        }).catch(err => {\n          console.error('we came across an error', err);\n        })\n    });\n    }\n    \n  },1000);\n}\n\nif(movieWrapper){\n  const googleUrl = 'https://sheets.googleapis.com/v4/spreadsheets/1nXRZYrOnedMOvioQJxbIQKTpc9_XCGI23-KMk8jwZQU/values/Movies!A:D?key=AIzaSyDrWhgTrY_NIQ7pa19SpdYtF0Wcom3stDA';\n  fetch(googleUrl).then(response=>{\n  \n      response.json().then(json =>{\n          const movies = json;\n          for(var i = 0; i < movies.values.length; i++){\n               const apiUrl = 'https://api.themoviedb.org/3/search/movie?api_key=e444034c3d7ef62e63059e6e8ac5b828&query='+movies.values[i][0].replace(/\\s+/g,'-')+'&primary_release_year='+movies.values[i][1]+'&year='+movies.values[i][1]+'&language=en-US&include_adult=false';\n              fetch(apiUrl).then(response => {\n                  response.json().then(movie => {\n                     for(var i = 0; i <movie.results.length; i++){\n                         let  title = movie.results[i].title,\n                              year = movie.results[i].release_date.split('-')[0];\n                            movieArray.push({title:title,year:year,id: movie.results[i].id,poster:'https://image.tmdb.org/t/p/original/'+movie.results[i].poster_path});\n                            break;\n                     }                      \n                  }).catch(error => {\n                    console.error('we came across an error', error);\n                  })\n              });\n          } \n      })\n  }).catch(err=>{\n    console.error('There was an issue with the resquest', err);\n  });\n\n  function personalSearch(){\n    var searchvalue = document.querySelector('#search').value.toLowerCase();\n    if(document.querySelector('.error').classList.contains('active')){\n      document.querySelector('.error').classList.remove('active');\n    }\n    if(searchvalue.length == 0 || searchvalue == \" \"){\n      loadMovies();\n    } \n    else {\n      let movie = movieArray.filter(x=> x.title.toLowerCase().replace(/'/g,\"\").includes(searchvalue.toLowerCase().replace(/'/g,\"\")));\n        if(movie.length > 0){\n          let overview ='';\n          setTimeout(() => {\n              for(var i = 0; i <movie.length; i++){\n                const searchApi = 'https://api.themoviedb.org/3/movie/'+movie[i].id+'?api_key=e444034c3d7ef62e63059e6e8ac5b828&primary_release_year='+movie[i].year+'&year='+movie[i].year+'&query='+movie[i].title.replace(/\\s/g, '-')+'&language=en-US';\n                const releaseDates = 'https://api.themoviedb.org/3/movie/'+movieArray[i].id+'/release_dates?api_key=e444034c3d7ef62e63059e6e8ac5b828&language=en-US';\n                movieWrapper.innerHTML = '';\n\n                fetch(searchApi).then(response => \n                  response.json().then(movie => {\n                    fetch(releaseDates).then(res=> \n                      res.json().then(dates => {\n                        var rating = dates.results.filter(i => i.iso_3166_1 === 'US');\n                        for(var x = 0; x < rating.length; x++){\n                        let overview ='';\n                        if(movie.overview.length >= 325){\n                          overview = movie.overview.substring(0,325)+'<a href=\"https://www.themoviedb.org/movie/'+movie.id+'-'+movie.title+'\" target=\"_blank\" class=\"read-more\" aria-label=\"Read more about'+movie.title+'\">...read more</a>';\n                        }\n                        else {\n                            overview = movie.overview;\n                        }\n                        const vote = (movie.vote_average)*10;\n                        const hours = Math.floor(movie.runtime / 60);\n                        const mins = movie.runtime % 60;\n                        const cert = '';\n                        const runtime = hours+'h '+mins+'m';\n                     \n                        if(rating[x].release_dates[0].certification != \"\"){\n                          cert = rating[x].release_dates[0].certification;\n                        }\n                        else if(rating[x].release_dates[1].certification != \"\"){\n                          cert = rating[x].release_dates[1].certification;\n                        }\n                        else if(rating[x].release_dates[2].certification !=\"\"){\n                          cert = rating[x].release_dates[2].certification;\n                        }\n                        else if(rating[x].release_dates[3].certification !=\"\"){\n                          cert = rating[x].release_dates[3].certification;\n                        }\n                        else  {\n                          cert = 'N/A'\n                        }\n\n                        if(movie.genres[0].name === 'Science Fiction'){\n                          movie.genres[0].name = 'Sci-Fi';\n                        }\n\n                        movieWrapper.innerHTML += '<div class=\"card\" onclick=\"this.focus()\" style=\"background-image: url(\\'https://image.tmdb.org/t/p/original/'+movie.poster_path+'\\');\"'+movie.id+'><div class=\"details\"><h2>'+movie.title+'</h2><span class=\"score\"><p>'+vote+'%</p></span><p class=\"tagline\">'+movie.tagline+'</p><ul><li>'+cert+'</li><li>'+movie.release_date.split('-')[0]+'</li><li>'+runtime+'</li><li>'+movie.genres[0].name+'</li></ul><p class=\"overview\">'+overview+'</p></div></div>';\n                            }\n                          })\n                  )                    \n                  }).catch(err => {\n                    console.error('we came across an error', err);\n                  })\n              )\n               }\n          }, 100);\n        }\n        else { \n          movieWrapper.innerHTML = '';\n          if(!document.querySelector('.error').classList.contains('active')){\n            movieWrapper.innerHTML = '';\n            document.querySelector('.error').classList.add('active');\n          }\n        }  \n    }\n  }\n\n  document.querySelector('#search').addEventListener('keyup', function(event){\n    event.preventDefault();\n    if (event.keyCode === 13) {\n        personalSearch();\n    }\n  })\n\n  document.querySelector('.search-submit').addEventListener('click', function(){\n    personalSearch();\n  });\n\n  document.querySelector('.search-submit').addEventListener('touchevent', function(){\n    personalSearch();\n  });\n  loadMovies();\n\n  window.addEventListener('scroll', function(){\n    const top = document.querySelector('.back-top');\n    if(window.scrollY > 100){\n     \n      if(!top.classList.contains('active')){\n         top.classList.add('active');\n      }\n\n    }\n    if(window.scrollY === 0) {\n      top.classList.remove('active');\n    }\n  });\n  \n  document.querySelector('.back-top').addEventListener('click', function(){\n    if(document.querySelector('.back-top').classList.contains('active')){\n      document.querySelector('.back-top').classList.remove('active');\n    }\n  })\n  \n}\n\n\n\n\n"]}