{"version":3,"sources":["site.js"],"names":["document","addEventListener","body","querySelector","classList","contains","add","path","location","pathname","split","href","navLink","querySelectorAll","i","length","getAttribute","img","singleImg","event","remove","menu","navList","setTimeout","movieArray","movieWrapper","x","fetch","getUrl","then","response","json","movie","overview","substring","id","title","vote","vote_average","Math","floor","runtime","innerHTML","poster_path","replace","toLowerCase","tagline","release_date","genres","name","err","console","error","personalSearch","searchvalue","value","searchResult","poster","googleUrl","loadMovies","movies","apiUrl","values","results","year","push","preventDefault","keyCode"],"mappings":"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","file":"../site.min.js","sourcesContent":["// ------------------------------------------------\n// Set active page in nav\n// ------------------------------------------------\ndocument.addEventListener('DOMContentLoaded', function () {\n  const body = document.querySelector('body');\n\n  if (!body.classList.contains('transition')) {\n    body.classList.add('transition');\n  } else {\n    body.classList.remove('transition');\n  }\n});\n\nif (document.querySelector('.main-nav')) {\n  const path = location.pathname.split('/');\n  const href = path[1];\n\n  const navLink = document.querySelectorAll('.nav-link');\n  for (var i = 0; i < navLink.length; i++) {\n    if (navLink[i].getAttribute('href') === href) {\n      navLink[i].classList.add('active');\n    } else if (\n      href === '' &&\n      navLink[i].getAttribute('href') === 'index.html'\n    ) {\n      navLink[i].classList.add('active');\n    }\n  }\n}\n\n// ------------------------------------------------\n// Image zoom\n// ------------------------------------------------\nif (document.querySelector('.gallery-wrapper')) {\n  const img = document.querySelectorAll('.card-image');\n  img.forEach((singleImg) => {\n    singleImg.classList.remove('zoom');\n    singleImg.addEventListener('click', (event) => {\n      if (singleImg.classList.contains('zoom')) {\n        singleImg.classList.remove('zoom');\n      } else {\n        for (var i = 0; i < img.length; i++) {\n          if (img[i].classList.contains('zoom')) {\n            img[i].classList.remove('zoom');\n          }\n        }\n        singleImg.classList.add('zoom');\n      }\n    });\n  });\n}\n\n// Menu open / close \nif(document.querySelector('.hamburger-menu')){\n  const menu = document.querySelector('.hamburger-menu'),\n        navList = document.querySelector('.main-nav'),\n        body = document.querySelector('body');\n\n  menu.addEventListener('click', function(){\n      if(navList.classList.contains('js-open')){ ;\n        menu.classList.add('js-close');\n        navList.classList.add('js-close');\n        setTimeout(() => {\n          navList.classList.remove('js-open'); \n          menu.classList.remove('js-open')\n          menu.classList.remove('js-close');\n          navList.classList.remove('js-close');\n          body.classList.remove('js-open');\n           \n        }, 500);\n      } else {\n        navList.classList.add('js-open');\n        body.classList.add('js-open');\n        menu.classList.add('js-open');\n      }\n  });\n}\n\nconst movieArray = [];\nconst movieWrapper = document.querySelector('.movie-wrapper');\n\nfunction loadMovies(){\n  movieWrapper.innerHTML = '';\n  setTimeout(function(){\n    for(var x=0; x<movieArray.length; x++){\n      const getUrl = 'https://api.themoviedb.org/3/movie/'+movieArray[x].id+'?api_key=e444034c3d7ef62e63059e6e8ac5b828&language=en-US';\n      \n      fetch(getUrl).then(response => {\n        response.json().then(movie => {\n          let overview ='';\n          if(movie.overview.length >= 325){\n            overview = movie.overview.substring(0,325)+'<a href=\"https://www.themoviedb.org/movie/'+movie.id+'-'+movie.title+'\" target=\"_blank\" class=\"read-more\" aria-label=\"Read more about'+movie.title+'\">...read more</a>';\n          }\n          else {\n              overview = movie.overview;\n          }\n          const vote = (movie.vote_average)*10;\n          const hours = Math.floor(movie.runtime / 60);\n          const mins = movie.runtime % 60;\n          const runtime = hours+'h '+mins+'m';\n          movieWrapper.innerHTML += '<div class=\"card\" onclick=\"this.focus()\" style=\"background-image: url(\\'https://image.tmdb.org/t/p/original/'+movie.poster_path+'\\');\"id='+movie.title.replace(/\\s/g, '-').toLowerCase()+'><div class=\"details\"><h2>'+movie.title+'</h2><span class=\"score\"><p>'+vote+'%</p></span><p class=\"tagline\">'+movie.tagline+'</p><ul><li>'+movie.release_date.split('-')[0]+'</li><li>'+runtime+'</li><li>'+movie.genres[0].name+'</li></ul><p class=\"overview\">'+overview+'</p></div></div>';\n        // break;                     \n        }).catch(err => {\n          console.error('we came across an error', err);\n        })\n    });\n    }\n    \n  },1000);\n}\n\n\nif(movieWrapper){\n  const googleUrl = 'https://sheets.googleapis.com/v4/spreadsheets/1nXRZYrOnedMOvioQJxbIQKTpc9_XCGI23-KMk8jwZQU/values/Movies!A:D?key=AIzaSyDrWhgTrY_NIQ7pa19SpdYtF0Wcom3stDA';\n  fetch(googleUrl).then(response=>{\n      response.json().then(json =>{\n          const movies = json;\n          for(var i = 0; i < movies.values.length; i++){\n               const apiUrl = 'https://api.themoviedb.org/3/search/movie?api_key=e444034c3d7ef62e63059e6e8ac5b828&query='+movies.values[i][0].replace(/\\s+/g,'-')+'&primary_release_year='+movies.values[i][1]+'&year='+movies.values[i][1]+'&language=en-US&include_adult=false';\n              fetch(apiUrl).then(response => {\n                  response.json().then(movie => {\n                     for(var i = 0; i <movie.results.length; i++){\n                         let  title = movie.results[i].title,\n                              year = movie.results[i].release_date.split('-')[0];\n                            movieArray.push({title:title,year:year,id: movie.results[i].id,poster:'https://image.tmdb.org/t/p/original/'+movie.results[i].poster_path});\n                            break;\n                     }                      \n                  }).catch(error => {\n                    console.error('we came across an error', error);\n                  })\n              });\n          } \n      })\n  }).catch(err=>{\n    console.error('There was an issue with the resquest', err);\n  });\n\n  function personalSearch(){\n    var searchvalue = document.querySelector('#search').value.toLowerCase();\n    if(document.querySelector('.error').classList.contains('active')){\n      document.querySelector('.error').classList.remove('active');\n    }\n    if(searchvalue.length == 0 || searchvalue == \" \"){\n      loadMovies();\n    } \n    else {\n      let movie = movieArray.filter(x => x.title.toLowerCase().replace(/'/g, \"\") === searchvalue.replace(/'/g,\"\"));\n        if(movie.length > 0){\n          let overview ='';\n          setTimeout(() => {\n              for(var i = 0; i <movie.length; i++){\n                const searchApi = 'https://api.themoviedb.org/3/movie/'+movie[i].id+'?api_key=e444034c3d7ef62e63059e6e8ac5b828&primary_release_year='+movie[i].year+'&year='+movie[i].year+'&query='+movie[i].title.replace(/\\s/g, '-')+'&language=en-US';\n\n                movieWrapper.innerHTML = '';\n\n                fetch(searchApi).then(response=>{\n                 response.json().then(json=>{\n                   const searchResult = json;\n\n                   if(searchResult.overview.length >= 325){\n                     overview = searchResult.overview.substring(0,325)+'<a href=\"https://www.themoviedb.org/movie/'+searchResult.id+'-'+searchResult.title+'\" target=\"_blank\" class=\"read-more\" aria-label=\"Read more about'+searchResult.title+'\">...read more</a>';\n                   }\n                   else {\n                       overview = searchResult.overview;\n                   }\n         \n                     const vote = (searchResult.vote_average)*10;\n                     const hours = Math.floor(searchResult.runtime / 60);\n                     const mins = searchResult.runtime % 60;\n                     const runtime = hours+'h '+mins+'m';\n                     \n                     movieWrapper.innerHTML += '<div class=\"card\" onclick=\"this.focus()\" style=\"background-image: url(\\'https://image.tmdb.org/t/p/original/'+searchResult.poster_path+'\\');\"id='+searchResult.title.replace(/\\s/g, '-').toLowerCase()+'><div class=\"details\"><h2>'+searchResult.title+'</h2><span class=\"score\"><p>'+vote+'%</p></span><p class=\"tagline\">'+searchResult.tagline+'</p><ul><li>'+searchResult.release_date.split('-')[0]+'</li><li>'+runtime+'</li><li>'+searchResult.genres[0].name+'</li></ul><p class=\"overview\">'+overview+'</p></div></div>';\n                 });\n               }).catch(err => {\n                console.error('we came across an error', err);\n              })\n               }\n          }, 200);\n        }\n        else { \n          movieWrapper.innerHTML = '';\n          if(!document.querySelector('.error').classList.contains('active')){\n            movieWrapper.innerHTML = '';\n            document.querySelector('.error').classList.add('active');\n            \n          }\n          \n        }  \n    }\n  }\n\n  document.querySelector('#search').addEventListener('keyup', function(event){\n    event.preventDefault();\n    if (event.keyCode === 13) {\n        personalSearch();\n    }\n  })\n\n  document.querySelector('.search-submit').addEventListener('click', function(){\n    personalSearch();\n  });\n\n  document.querySelector('.search-submit').addEventListener('touchevent', function(){\n    personalSearch();\n  });\n  loadMovies();\n}\n\n\n\n\n"]}